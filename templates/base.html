{% load static %}
<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="{% static 'css/dashboard.css' %}">
    <title>{% block title %}Title{% endblock %}</title>
</head>
<body>
<div id="wrapper">
    <div id="sidebar" class="expanded">
        <div class="logo">
            <svg width="127" height="37" viewBox="0 0 127 37" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="6.68421" cy="6.68421" r="6.68421" transform="matrix(0 -1 -1 0 102.491 13.3684)"
                        fill="#00B4C4"/>
                <rect width="20.0526" height="4.45614" transform="matrix(0 -1 -1 0 98.0349 32.3068)" fill="#00B4C4"/>
                <path d="M10.4813 10.7579H15.1458L25.6409 32.4561H21.018L19.2827 28.805H6.60805L4.92827 32.4561H0.291532L10.4813 10.7579ZM17.5474 25.1817L12.8552 15.3252L8.28782 25.1817H17.5474ZM28.3746 24.3349C28.3746 23.0299 28.6199 21.8546 29.1104 20.8088C29.6009 19.7537 30.2765 18.856 31.1372 18.1156C32.0072 17.3659 33.0345 16.7921 34.2191 16.3941C35.413 15.9869 36.7041 15.7833 38.0923 15.7833C38.6847 15.7833 39.2677 15.8203 39.8415 15.8944C40.4246 15.9684 40.9799 16.0702 41.5074 16.1998C42.0442 16.3293 42.544 16.4867 43.0067 16.6718C43.4787 16.8476 43.8952 17.042 44.2561 17.2548V9.42514H48.3654V32.4561H44.2561V30.9152C43.8952 31.1651 43.4695 31.4011 42.979 31.6232C42.4884 31.8453 41.9609 32.0397 41.3964 32.2062C40.8318 32.3728 40.2441 32.5024 39.6333 32.595C39.0317 32.6968 38.4348 32.7477 37.8425 32.7477C36.4542 32.7477 35.177 32.5441 34.0109 32.1368C32.854 31.7296 31.8591 31.1558 31.0262 30.4154C30.1932 29.675 29.5407 28.7912 29.0687 27.7639C28.606 26.7273 28.3746 25.5843 28.3746 24.3349ZM32.6921 24.3349C32.6921 24.992 32.8216 25.6121 33.0808 26.1951C33.3492 26.7782 33.7286 27.2919 34.2191 27.7361C34.7189 28.1711 35.3158 28.5181 36.01 28.7773C36.7133 29.0272 37.5 29.1521 38.37 29.1521C38.9253 29.1521 39.4806 29.1012 40.0359 28.9994C40.5912 28.8883 41.1233 28.7356 41.6324 28.5413C42.1506 28.3469 42.6319 28.1109 43.0761 27.8333C43.5296 27.5556 43.923 27.2456 44.2561 26.9031V21.2252C43.8397 20.892 43.4001 20.6098 42.9373 20.3784C42.4746 20.147 42.0026 19.9573 41.5213 19.8092C41.04 19.6611 40.5542 19.5547 40.0636 19.4899C39.5731 19.4159 39.0965 19.3789 38.6338 19.3789C37.6897 19.3789 36.8475 19.5084 36.1071 19.7676C35.376 20.0175 34.7559 20.3645 34.2469 20.8088C33.7471 21.253 33.3631 21.7759 33.0947 22.3775C32.8263 22.979 32.6921 23.6315 32.6921 24.3349ZM54.653 16.0748H58.7622V17.4631C59.7895 16.8337 60.789 16.3988 61.7608 16.1581C62.7418 15.9082 63.6997 15.7833 64.6345 15.7833C65.9394 15.7833 67.1379 15.9915 68.23 16.408C69.3221 16.8245 70.2569 17.4538 71.0343 18.296C71.6359 17.8333 72.2282 17.4446 72.8112 17.1299C73.3943 16.806 73.9774 16.5468 74.5604 16.3525C75.1435 16.1489 75.7358 16.0054 76.3374 15.9221C76.939 15.8296 77.559 15.7833 78.1976 15.7833C79.5396 15.7833 80.7566 15.9684 81.8487 16.3386C82.9408 16.6995 83.8709 17.241 84.6391 17.9629C85.4165 18.6847 86.0135 19.5871 86.4299 20.6699C86.8557 21.7435 87.0685 22.9883 87.0685 24.4043V32.4561H82.9732V25.0707C82.9732 24.1729 82.8436 23.3724 82.5845 22.669C82.3346 21.9564 81.9783 21.3594 81.5155 20.8782C81.062 20.3877 80.516 20.0175 79.8774 19.7676C79.2481 19.5084 78.5539 19.3789 77.795 19.3789C77.3786 19.3789 76.9528 19.4205 76.5179 19.5038C76.0829 19.5778 75.6571 19.6982 75.2407 19.8647C74.8335 20.0313 74.4494 20.2442 74.0884 20.5033C73.7275 20.7532 73.4128 21.0494 73.1444 21.3918V32.4561H69.0491V25.0707C69.0491 24.1729 68.9195 23.3724 68.6604 22.669C68.4105 21.9564 68.0542 21.3594 67.5914 20.8782C67.1379 20.3877 66.5873 20.0175 65.9394 19.7676C65.3008 19.5084 64.5975 19.3789 63.8293 19.3789C63.3573 19.3789 62.8807 19.4298 62.3994 19.5316C61.9274 19.6241 61.4693 19.7583 61.025 19.9342C60.5901 20.11 60.1782 20.3229 59.7895 20.5728C59.41 20.8226 59.0676 21.1049 58.7622 21.4196V32.4561H54.653V16.0748ZM103.961 16.0748H108.07V17.4631C109.163 16.843 110.204 16.408 111.194 16.1581C112.194 15.9082 113.17 15.7833 114.123 15.7833C115.373 15.7833 116.529 15.9684 117.594 16.3386C118.658 16.6995 119.579 17.241 120.356 17.9629C121.134 18.6847 121.74 19.5871 122.175 20.6699C122.619 21.7435 122.841 22.9883 122.841 24.4043V32.4561H118.746V25.0707C118.746 24.1729 118.616 23.3724 118.357 22.669C118.107 21.9564 117.742 21.3594 117.261 20.8782C116.789 20.3877 116.21 20.0175 115.525 19.7676C114.85 19.5084 114.091 19.3789 113.249 19.3789C112.804 19.3789 112.346 19.4251 111.874 19.5177C111.411 19.6102 110.953 19.7444 110.5 19.9203C110.056 20.0869 109.625 20.2997 109.209 20.5589C108.792 20.8088 108.413 21.0957 108.07 21.4196V32.4561H103.961V16.0748Z"
                      fill="white"/>
            </svg>
        </div>
        <ul class="nav">
            <li><a href="{% url 'main' %}">
                <svg style="margin-right: 10px" width="24" height="24" viewBox="0 0 24 24" fill="none"
                     xmlns="http://www.w3.org/2000/svg">
                    <path d="M13.338 0.833055C12.9707 0.502491 12.4941 0.31958 12 0.31958C11.5059 0.31958 11.0293 0.502491 10.662 0.833055L0 10.4291V20.8291C0 21.6778 0.337142 22.4917 0.937258 23.0918C1.53737 23.6919 2.35131 24.0291 3.2 24.0291H20.8C21.6487 24.0291 22.4626 23.6919 23.0627 23.0918C23.6629 22.4917 24 21.6778 24 20.8291V10.4291L13.338 0.833055ZM15 22.0261H9V17.0001C9 16.2044 9.31607 15.4413 9.87868 14.8787C10.4413 14.3161 11.2044 14.0001 12 14.0001C12.7956 14.0001 13.5587 14.3161 14.1213 14.8787C14.6839 15.4413 15 16.2044 15 17.0001V22.0261ZM22 20.8261C22 21.1443 21.8736 21.4495 21.6485 21.6746C21.4235 21.8996 21.1183 22.0261 20.8 22.0261H17V17.0001C17 15.674 16.4732 14.4022 15.5355 13.4645C14.5979 12.5268 13.3261 12.0001 12 12.0001C10.6739 12.0001 9.40215 12.5268 8.46447 13.4645C7.52678 14.4022 7 15.674 7 17.0001V22.0261H3.2C2.88174 22.0261 2.57652 21.8996 2.35147 21.6746C2.12643 21.4495 2 21.1443 2 20.8261V11.3191L12 2.31906L22 11.3191V20.8261Z"
                          fill="#DEDEDE"/>
                </svg>
                <span class="nav-text">Главная</span></a></li>

            {% if user.is_authenticated %}
                <li><a href="{% url  'profile' %}">
                    <svg style="margin-right: 10px" width="24" height="24" viewBox="0 0 24 24" fill="none"
                         xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 4C9.79 4 8 5.79 8 8C8 10.21 9.79 12 12 12C14.21 12 16 10.21 16 8C16 5.79 14.21 4 12 4ZM12 14C7.58 14 4 15.79 4 18V20H20V18C20 15.79 16.42 14 12 14Z"
                              fill="#DEDEDE"/>
                    </svg>

                    <span class="nav-text">Профиль</span></a></li>
                <li><a href="{% url 'task' %}">
                    <svg style="margin-right: 10px" width="24" height="22" viewBox="0 0 24 22" fill="none"
                         xmlns="http://www.w3.org/2000/svg">
                        <path d="M19 0.00012207H5C3.6744 0.00170993 2.40356 0.529004 1.46622 1.46634C0.528882 2.40368 0.00158786 3.67453 0 5.00012L0 17.0001C0.00158786 18.3257 0.528882 19.5966 1.46622 20.5339C2.40356 21.4712 3.6744 21.9985 5 22.0001H19C20.3256 21.9985 21.5964 21.4712 22.5338 20.5339C23.4711 19.5966 23.9984 18.3257 24 17.0001V5.00012C23.9984 3.67453 23.4711 2.40368 22.5338 1.46634C21.5964 0.529004 20.3256 0.00170993 19 0.00012207V0.00012207ZM5 2.00012H19C19.7956 2.00012 20.5587 2.31619 21.1213 2.8788C21.6839 3.44141 22 4.20447 22 5.00012V6.00012H2V5.00012C2 4.20447 2.31607 3.44141 2.87868 2.8788C3.44129 2.31619 4.20435 2.00012 5 2.00012V2.00012ZM19 20.0001H5C4.20435 20.0001 3.44129 19.6841 2.87868 19.1214C2.31607 18.5588 2 17.7958 2 17.0001V8.00012H22V17.0001C22 17.7958 21.6839 18.5588 21.1213 19.1214C20.5587 19.6841 19.7956 20.0001 19 20.0001ZM19 12.0001C19 12.2653 18.8946 12.5197 18.7071 12.7072C18.5196 12.8948 18.2652 13.0001 18 13.0001H6C5.73478 13.0001 5.48043 12.8948 5.29289 12.7072C5.10536 12.5197 5 12.2653 5 12.0001C5 11.7349 5.10536 11.4806 5.29289 11.293C5.48043 11.1055 5.73478 11.0001 6 11.0001H18C18.2652 11.0001 18.5196 11.1055 18.7071 11.293C18.8946 11.4806 19 11.7349 19 12.0001ZM15 16.0001C15 16.2653 14.8946 16.5197 14.7071 16.7072C14.5196 16.8948 14.2652 17.0001 14 17.0001H6C5.73478 17.0001 5.48043 16.8948 5.29289 16.7072C5.10536 16.5197 5 16.2653 5 16.0001C5 15.7349 5.10536 15.4806 5.29289 15.293C5.48043 15.1055 5.73478 15.0001 6 15.0001H14C14.2652 15.0001 14.5196 15.1055 14.7071 15.293C14.8946 15.4806 15 15.7349 15 16.0001ZM3 4.00012C3 3.80234 3.05865 3.609 3.16853 3.44455C3.27841 3.2801 3.43459 3.15193 3.61732 3.07624C3.80004 3.00055 4.00111 2.98075 4.19509 3.01934C4.38907 3.05792 4.56725 3.15316 4.70711 3.29302C4.84696 3.43287 4.9422 3.61105 4.98079 3.80503C5.01937 3.99901 4.99957 4.20008 4.92388 4.38281C4.84819 4.56553 4.72002 4.72171 4.55557 4.83159C4.39112 4.94147 4.19778 5.00012 4 5.00012C3.73478 5.00012 3.48043 4.89477 3.29289 4.70723C3.10536 4.51969 3 4.26534 3 4.00012ZM6 4.00012C6 3.80234 6.05865 3.609 6.16853 3.44455C6.27841 3.2801 6.43459 3.15193 6.61732 3.07624C6.80004 3.00055 7.00111 2.98075 7.19509 3.01934C7.38907 3.05792 7.56725 3.15316 7.70711 3.29302C7.84696 3.43287 7.9422 3.61105 7.98079 3.80503C8.01937 3.99901 7.99957 4.20008 7.92388 4.38281C7.84819 4.56553 7.72002 4.72171 7.55557 4.83159C7.39112 4.94147 7.19778 5.00012 7 5.00012C6.73478 5.00012 6.48043 4.89477 6.29289 4.70723C6.10536 4.51969 6 4.26534 6 4.00012ZM9 4.00012C9 3.80234 9.05865 3.609 9.16853 3.44455C9.27841 3.2801 9.43459 3.15193 9.61732 3.07624C9.80004 3.00055 10.0011 2.98075 10.1951 3.01934C10.3891 3.05792 10.5673 3.15316 10.7071 3.29302C10.847 3.43287 10.9422 3.61105 10.9808 3.80503C11.0194 3.99901 10.9996 4.20008 10.9239 4.38281C10.8482 4.56553 10.72 4.72171 10.5556 4.83159C10.3911 4.94147 10.1978 5.00012 10 5.00012C9.73478 5.00012 9.48043 4.89477 9.29289 4.70723C9.10536 4.51969 9 4.26534 9 4.00012Z"
                              fill="#DEDEDE"/>
                    </svg>
                    <span class="nav-text">Задачи</span></a></li>
                <li><a href="{% url 'documents' %}">
                    <svg style="margin-right: 10px" width="20" height="24" viewBox="0 0 20 24" fill="none"
                         xmlns="http://www.w3.org/2000/svg">
                        <path d="M5.00012 12H15.0001V14H5.00012V12ZM5.00012 18H12.0001V16H5.00012V18ZM20.0001 7.586V24H0.00012207V3C0.00012207 2.20435 0.316193 1.44129 0.878802 0.87868C1.44141 0.31607 2.20447 0 3.00012 0L12.4141 0L20.0001 7.586ZM13.0001 7H16.5861L13.0001 3.414V7ZM18.0001 22V9H11.0001V2H3.00012C2.73491 2 2.48055 2.10536 2.29302 2.29289C2.10548 2.48043 2.00012 2.73478 2.00012 3V22H18.0001Z"
                              fill="#DEDEDE"/>
                    </svg>
                    <span class="nav-text">Документы</span></a></li>
                <li><a href="{% url 'department_list' %}">
                    <svg style="margin-right: 10px" width="24" height="24" viewBox="0 0 24 24" fill="none"
                         xmlns="http://www.w3.org/2000/svg">
                        <path d="M21.7359 16.4C21.4001 15.4099 20.7628 14.5497 19.9135 13.9399C19.0642 13.3302 18.0454 13.0015 16.9999 13H12.9999V11.916C14.4833 11.6652 15.8184 10.8664 16.7406 9.67769C17.6627 8.48902 18.1047 6.99729 17.9789 5.49812C17.8531 3.99895 17.1687 2.60175 16.0613 1.5834C14.9539 0.565053 13.5044 -0.00012207 11.9999 -0.00012207C10.4955 -0.00012207 9.04594 0.565053 7.93855 1.5834C6.83116 2.60175 6.14675 3.99895 6.02094 5.49812C5.89513 6.99729 6.3371 8.48902 7.25927 9.67769C8.18145 10.8664 9.51652 11.6652 10.9999 11.916V13H6.99992C5.95441 13.0015 4.93561 13.3302 4.0863 13.9399C3.23699 14.5497 2.59976 15.4099 2.26392 16.4C1.40601 16.8138 0.723959 17.5203 0.340465 18.3922C-0.0430283 19.2641 -0.102788 20.2443 0.171936 21.1563C0.446661 22.0683 1.03784 22.8524 1.83911 23.3675C2.64038 23.8825 3.59914 24.0947 4.54291 23.9659C5.48669 23.8371 6.35351 23.3757 6.98744 22.6647C7.62138 21.9538 7.9808 21.04 8.00105 20.0877C8.0213 19.1354 7.70106 18.2071 7.09792 17.4698C6.49479 16.7326 5.64836 16.2348 4.71092 16.066C4.99205 15.7326 5.34248 15.4645 5.7378 15.2804C6.13312 15.0963 6.56383 15.0006 6.99992 15H10.9999V16.127C10.0573 16.3704 9.23573 16.9492 8.68932 17.755C8.1429 18.5607 7.90913 19.5381 8.0318 20.504C8.15447 21.4698 8.62518 22.3577 9.35569 23.0013C10.0862 23.6449 11.0263 23.9999 11.9999 23.9999C12.9735 23.9999 13.9136 23.6449 14.6442 23.0013C15.3747 22.3577 15.8454 21.4698 15.968 20.504C16.0907 19.5381 15.8569 18.5607 15.3105 17.755C14.7641 16.9492 13.9426 16.3704 12.9999 16.127V15H16.9999C17.4358 15.0002 17.8663 15.0955 18.2616 15.279C18.6569 15.4626 19.0075 15.7301 19.2889 16.063C18.3515 16.2318 17.505 16.7296 16.9019 17.4668C16.2988 18.2041 15.9785 19.1324 15.9988 20.0847C16.019 21.037 16.3785 21.9508 17.0124 22.6617C17.6463 23.3727 18.5132 23.8341 19.4569 23.9629C20.4007 24.0917 21.3595 23.8795 22.1607 23.3645C22.962 22.8494 23.5532 22.0653 23.8279 21.1533C24.1026 20.2413 24.0429 19.2611 23.6594 18.3892C23.2759 17.5173 22.5938 16.8108 21.7359 16.397V16.4ZM7.99992 5.99996C7.99992 5.20883 8.23452 4.43547 8.67404 3.77768C9.11357 3.11988 9.73828 2.60719 10.4692 2.30444C11.2001 2.00169 12.0044 1.92248 12.7803 2.07682C13.5562 2.23116 14.2689 2.61212 14.8283 3.17153C15.3878 3.73094 15.7687 4.44367 15.9231 5.2196C16.0774 5.99552 15.9982 6.79979 15.6954 7.53069C15.3927 8.2616 14.88 8.88631 14.2222 9.32584C13.5644 9.76536 12.791 9.99996 11.9999 9.99996C10.9391 9.99996 9.92164 9.57853 9.17149 8.82839C8.42135 8.07824 7.99992 7.06082 7.99992 5.99996V5.99996ZM5.99992 20C5.99992 20.3955 5.88262 20.7822 5.66286 21.1111C5.4431 21.44 5.13074 21.6963 4.76529 21.8477C4.39983 21.9991 3.9977 22.0387 3.60974 21.9615C3.22178 21.8844 2.86541 21.6939 2.58571 21.4142C2.306 21.1345 2.11552 20.7781 2.03835 20.3901C1.96118 20.0022 2.00078 19.6 2.15216 19.2346C2.30353 18.8691 2.55988 18.5568 2.88878 18.337C3.21768 18.1173 3.60436 18 3.99992 18C4.53035 18 5.03906 18.2107 5.41413 18.5857C5.78921 18.9608 5.99992 19.4695 5.99992 20ZM13.9999 20C13.9999 20.3955 13.8826 20.7822 13.6629 21.1111C13.4431 21.44 13.1307 21.6963 12.7653 21.8477C12.3998 21.9991 11.9977 22.0387 11.6097 21.9615C11.2218 21.8844 10.8654 21.6939 10.5857 21.4142C10.306 21.1345 10.1155 20.7781 10.0383 20.3901C9.96118 20.0022 10.0008 19.6 10.1522 19.2346C10.3035 18.8691 10.5599 18.5568 10.8888 18.337C11.2177 18.1173 11.6044 18 11.9999 18C12.5304 18 13.0391 18.2107 13.4141 18.5857C13.7892 18.9608 13.9999 19.4695 13.9999 20ZM19.9999 22C19.6044 22 19.2177 21.8827 18.8888 21.6629C18.5599 21.4431 18.3035 21.1308 18.1522 20.7653C18.0008 20.3999 17.9612 19.9977 18.0383 19.6098C18.1155 19.2218 18.306 18.8654 18.5857 18.5857C18.8654 18.306 19.2218 18.1156 19.6097 18.0384C19.9977 17.9612 20.3998 18.0008 20.7653 18.1522C21.1307 18.3036 21.4431 18.5599 21.6629 18.8888C21.8826 19.2177 21.9999 19.6044 21.9999 20C21.9999 20.5304 21.7892 21.0391 21.4141 21.4142C21.0391 21.7892 20.5304 22 19.9999 22Z"
                              fill="#DEDEDE"/>
                    </svg>
                    <span class="nav-text">Отделы</span></a></li>
                <li><a href="{% url 'chats' %}">
                    <svg style="margin-right: 10px" width="24" height="24" viewBox="0 0 24 24" fill="none"
                         xmlns="http://www.w3.org/2000/svg">
                        <path d="M20 2H4C2.9 2 2 2.9 2 4V22L6 18H20C21.1 18 22 17.1 22 16V4C22 2.9 21.1 2 20 2ZM20 16H5.17L4 17.17V4H20V16ZM6 12H18V14H6V12ZM6 9H18V11H6V9ZM6 6H18V8H6V6Z"
                              fill="#DEDEDE"/>
                    </svg>
                    <span class="nav-text">Чаты</span></a>
                </li>
                {% if request.user.is_superuser %}
                    <li><a href="{% url 'admin_panel' %}">
                        <svg style="margin-right: 10px" width="24" height="24" viewBox="0 0 24 24" fill="none"
                             xmlns="http://www.w3.org/2000/svg">
                            <path d="M19.43 12.98C19.47 12.66 19.5 12.34 19.5 12C19.5 11.66 19.47 11.34 19.43 11.02L21.54 9.37C21.72 9.23 21.77 8.98 21.66 8.77L19.66 5.23C19.55 5.02 19.31 4.94 19.1 5.01L16.6 5.77C16.1 5.42 15.56 5.14 14.97 4.95L14.5 2.29C14.47 2.12 14.33 2 14.16 2H9.84C9.67 2 9.53 2.12 9.5 2.29L9.03 4.95C8.44 5.14 7.9 5.42 7.4 5.77L4.9 5.01C4.69 4.94 4.45 5.02 4.34 5.23L2.34 8.77C2.23 8.98 2.28 9.23 2.46 9.37L4.57 11.02C4.53 11.34 4.5 11.66 4.5 12C4.5 12.34 4.53 12.66 4.57 12.98L2.46 14.63C2.28 14.77 2.23 15.02 2.34 15.23L4.34 18.77C4.45 18.98 4.69 19.06 4.9 18.99L7.4 18.23C7.9 18.58 8.44 18.86 9.03 19.05L9.5 21.71C9.53 21.88 9.67 22 9.84 22H14.16C14.33 22 14.47 21.88 14.5 21.71L14.97 19.05C15.56 18.86 16.1 18.58 16.6 18.23L19.1 18.99C19.31 19.06 19.55 18.98 19.66 18.77L21.66 15.23C21.77 15.02 21.72 14.77 21.54 14.63L19.43 12.98Z"
                                  stroke="#DEDEDE" stroke-width="1.5" fill="none"/>
                            <circle cx="12" cy="12" r="2" stroke="#DEDEDE" stroke-width="1.5" fill="none"/>
                        </svg>
                        <span class="nav-text">Управление</span></a></li>
                {% endif %}
            {% endif %}
            <li>
                <div class="theme-switcher">
                    <label class="switch">
                        <input type="checkbox" id="themeToggle">
                        <span class="slider round"></span>
                    </label>
                    <span id="themeLabel">Тёмная</span>
                </div>
            </li>
        </ul>
    </div>

    <div id="main-content">
        <header>
            <form method="GET" action="{% url 'search' %}" class="search-form">
                <input type="text"
                       name="query"
                       placeholder="Поиск по сотрудникам и документам.."
                       value="{{ request.GET.query|default_if_none:'' }}">
                <button type="submit" class="search">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
                        <path fill="white"
                              d="M15.5 14h-.79l-.28-.27a6.5 6.5 0 0 0 1.48-5.34c-.47-2.78-2.79-5-5.59-5.34a6.505 6.505 0 0 0-7.27 7.27c.34 2.8 2.56 5.12 5.34 5.59a6.5 6.5 0 0 0 5.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0 .41-.41.41-1.08 0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
                    </svg>
                </button>
            </form>

            <div class="profile">
                {% if user.avatar %}
                    <img src="{{ user.avatar.url }}" alt="Аватар" style="max-width: 150px; max-height: 150px;">
                {% else %}
                    <img src="{% static 'img/default-avatar.png' %}" alt="Аватар по умолчанию"
                         style="max-width: 150px; max-height: 150px;">
                {% endif %}
                {% if user.is_authenticated %}
                    {{ user.username }}
                {% else %}
                    Гость
                {% endif %}
                </span>

                {% if user.is_authenticated %}
                    <button><a href="{% url 'logout' %}">Выйти</a></button>
                {% else %}
                    <button><a href="{% url 'login' %}">Войти</a></button>
                {% endif %}
            </div>
        </header>
        <section class="dashboard">
            {% block main %}

            {% endblock %}
        </section>
    </div>
</div>

<script>
    function toggleTheme() {
        const currentTheme = document.documentElement.getAttribute('data-theme') || 'dark';
        const newTheme = currentTheme === 'dark' ? 'light' : 'dark';

        document.documentElement.setAttribute('data-theme', newTheme);
        localStorage.setItem('theme', newTheme);

        // Обновляем текст переключателя
        document.getElementById('themeLabel').textContent =
            newTheme === 'dark' ? 'Тёмная' : 'Светлая';
    }

    document.addEventListener('DOMContentLoaded', () => {
        const savedTheme = localStorage.getItem('theme') || 'dark';
        document.documentElement.setAttribute('data-theme', savedTheme);

        document.getElementById('themeLabel').textContent =
            savedTheme === 'dark' ? 'Тёмная' : 'Светлая';

        document.getElementById('themeToggle').addEventListener('change', toggleTheme);
    });


    document.addEventListener('DOMContentLoaded', function () {
        const sidebar = document.getElementById('sidebar');
        const sidebarToggleBtn = document.querySelector('.sidebar-toggle-btn');
        const body = document.body;

        // Обработчик клика по кнопке
        if (sidebarToggleBtn) {
            sidebarToggleBtn.addEventListener('click', function () {
                sidebar.classList.toggle('mobile-visible');
                body.classList.toggle('sidebar-open');
            });
        }

        // Закрытие сайдбара при клике вне его области
        document.addEventListener('click', function (event) {
            const isSidebarClick = sidebar.contains(event.target);
            const isButtonClick = event.target.closest('.sidebar-toggle-btn');

            if (!isSidebarClick && !isButtonClick && sidebar.classList.contains('mobile-visible')) {
                sidebar.classList.remove('mobile-visible');
                body.classList.remove('sidebar-open');
            }
        });

        // Автоматическое закрытие при ресайзе
        window.addEventListener('resize', function () {
            if (window.innerWidth > 768 && body.classList.contains('sidebar-open')) {
                sidebar.classList.remove('mobile-visible');
                body.classList.remove('sidebar-open');
            }
        });
    });
</script>
</body>
</html>